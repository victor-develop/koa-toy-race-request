# koa-toy-race-request

a toy project to demonstrate racing requests

# branches

The `master` branch is the typical flow without FIFO queue
The `use-fifo` branch is the one using pub/sub and FIFO queue to achieve linear execution per message group (i.e. per user_id) as [this diagram](https://www.draw.io/?lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=solve-race-with-fifo#R7Vpbd9o4EP41PCZH8t2P5J6e7oZd0rPp0x6BFXBjLCqLAPn1lWwZ25IBN1xM05JzgjWWZPn7ZkYzIzrm5WRxS9F0%2FBcJcNQxQLDomFcdw4DAN%2FiXkCwzie3YmWBEw0B2KgT98A3nI6V0FgY4qXRkhEQsnFaFQxLHeMgqMkQpmVe7PZOo%2BtQpGmFN0B%2BiSJf%2BFwZsnK%2BOf4o7dzgcjZl2a4Ly%2FlKQjFFA5iWRed0xLykhLLuaLC5xJPDLofnU7zpvD71gcHtPHr%2Fgt7tv8d1ZNtnNzwxZvQXFMdvv1JLfhC1zyHDAEZRNQtmYjEiMoutCekHJLA6wmBXwVtHnMyFTLoRc%2BA0ztpTqgGaMcNGYTSJ5N3umeJDC0pb3k%2F0SMqNDvKGfJTUN0RHeNF%2BJRW4BmEwwo0s%2BkOIIsfC1ujokVXG06ldgzS8k3D8BvZnN%2B4qimXzSv%2Fg7F3Q7xqVY%2FRjH%2FCuTXWg0MbxgVVQpTsI3NEg7CGKmJIxZumj7omNfcQmKwlHMBUMOM6Zc8IopC7m1dOWNSRgEKcURGuDoAg1fRinZlyQiNH2u%2BZx%2BViSKGfCiU2PLciWF%2BWyl16hnQ85%2BBs5t4LrZXI0ZktP1BBaluZxshPRqDqhOQJ6fE644KsGrNb2fc0vjXCO2sC5B6nwcMtyfolTf59xJ11lSDQnNbGkt2BCYoAIRzFmcl9yoJWXjkgM1AFjPxk72YrfhqjiIdPkkx6eNr6JxbufNq0X55tVStg7t4pyGLg5abbo4R1P33kP%2FsSN06SaZDdILCwqNAb3P3b%2F%2F7%2B7HzXEWk4xQWPJ6EX5mNT6PCU24SLiJhfHoMVULbqYHNC3TrFiWYddYll1rWQdiyf2IMYDX1ECcHQ0kHdqlFC1LHaRSrt2ALLfqXg1fid229Dc9oNCerWCvm5X3x3q3W6%2FXtvX6GktfEhHccTbAAMX873egBSq0AFujxT8mK3kCXKKl27vnglvE8BwtN4R9oL2wz1KiPsOs0W6jBkf%2FYDhCDcdVlvThtdq0XYUOXauP6mugsYaNPeWnvxYbfttsmG0EbngRsqfSdSkf4q0iHRKNPBtaZVE8iQfQqqZSqzRrTSqVtnqYhhw1sbEdJb%2BCTWtIreZXUK8nvHg87AQxCTD%2FAgBqKnIS9QXHVsoLsOFGo5Zq9gdlO%2BUFaUyFAX0t3dliTKUqxGpUiyUJ2LQmsavJvCvjckFV42ywOeOCcPOAw6RcUK%2BYKAZ9ogVDx1IS1LqqxnEN2m0cOZ4EghAoEEKnIYSHCzD0CsC6cO9EIfQbQph7%2F%2F1DqKfnN%2Fc3D1zyzwxzyccPmyGwvQopvqlx4h1Tqw3dhR71IOHcPaltO8d5%2B2npGp4Pu297SqSYlygOug0b%2Btkst5RwmFXVMh%2F4tB%2FbPfEjWWOjbfN0zjSViuiZIWOYXc9oYfWQ9kz10Yc7pc3hKdE%2FpWSIkyR9re8znLDT3AF9JWi16o5tjxqG5S9WPkUQZwc3ffH%2FFDF0nSqGPPRvG0M9K9C3sDjoih9M8VZMYuEwApSMV1juL%2BcEwKvWbwCPtH%2FlCs66fW1LWS%2BX7ejmVpWPPM30FC3KXlSO2pCwuoaSgUFlogwIbaK9OU0939qLkrplLQVNtdQ4qRircWmkXV1UVQi%2BWxdtqLhQZS2H1kU9cU1mg2RIw4GooqSx3Es5mPs9fl%2Fnbtz3eDCX%2B8w85DJ3U6sjRGp6er2Z6D0dG5420VviG5MT7bqm7xkA%2Br5XNVXo%2BeeebVrAtUXuZR6Hbd4sfkeddS9%2BkG5e%2FwA%3D)

# Setting up env vars
rename `.env.exmaple` to `.env` and fill it up to connect to AWS

# Get Started

init your repo

```
npm install
```

run server

```
node index.js
```

try to fire multiple requests

```
node fire-req.js
```
